*Image goes here*
___
# Font_Blanc_C
## Overview
Permutation matrix file encryption.
## Documentation Table of Contents
> [Usage](#usage)  
>> [Execution Flags](#execution-flags)  
>> [Instruction Flags](#instruction-flags)  
>> [Simple Example](#simple-example)  
>> [Intermediate Example](#intermediate-example)  
>> [Multipass Encryption Example](#multipass-encryption-example)  

## Usage
Run with `fontblanc <input filepath> <options ...>`.  

### Execution Flags
Execution flags are options used in the initial command to run the program. If the first instruction isn't contained in the initial command's arguments, then the program will automatically start in interactive instruction input mode.
| Flag | Description |
|:----:| :---------- |
| h    | Print general help. |
| e    | Run in encrypt mode. |
| d    | Run in decrypt mode. |
| t    | Set max number of threads to use. Expects argument. If not invoked, defaults to single-threaded. Recommended to set to the number of cores on the machine's CPU. |
| o    | Set output filename (uses input filepath). Expects argument. If not invoked, defaults to input filename. Adds prefix (decryption) or extension (encryption) to output filename to prevent overwriting the intput file. |
| m    | Run in interactive instruction input mode (multilevel encryption/decryption). |
| v    | Verbose output. Prints information for debugging. |
| k    | Set encrypt key for first instruction. Expects argument. |
| D    | Set permutation matrix dimension for first instruction. Expects argument. Argument of 0 denotes variable-dimension encryption. If not invoked, defaults to variable-dimension encryption. |
| s    | Skip data integrity checks for fist instruction. Not recommended. |

### Instruction Flags
Instruction flags are options used to define a single encryption/decryption rule in the interactive instruction input loop.
| Flag | Description |
|:----:| :---------- |
| h    | Print instruction help. |
| k    | Set encrypt key for current instruction. Expects argument. |
| D    | Set permutation matrix dimension for current instruction. Expects argument. Argument of 0 denotes variable-dimension encryption. If not invoked, defaults to variable-dimension encryption. |
| s    | Skip data integrity checks for current instruction. Not recommended. |
| r    | Delete last instruction. |

A generic instructions is written in the form of:  
`-k <some key> -D <some dimension>`  
Omitting the `k` flag prompts the user to type the encryption key into the terminal with keyboard echoing disabled.  

### Simple Example
The following command runs a single pass of encryption over the file `Constitution.pdf` using the key`fookeybar`. It encrypts using variable-dimension permutation matrices since the `D` flag was not invoked. It outputs a file named `Constitution.pdf.fbz`.  

    $ ./fontblanc Constitution.pdf -e -k fookeybar

    File name: Constitution.pdf
    File size: 4488706 bytes
    Mode: encrypt
    Threads: 1

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Encrypting...
    Executing instruction 1...
    Elapsed time (s): 0.816374
    Done.  

The following command decrypts the file generated by the previous encryption command. It outputs a file named `d_Constitution.pdf`.  

    $ ./fontblanc Constitution.pdf.fbz -d -k fookeybar

    File name: Constitution.pdf.fbz
    File size: 4488706 bytes
    Mode: decrypt
    Threads: 1

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Decrypting...
    Elapsed time (s): 0.801153
    Done.  
### Intermediate Example
The following command runs a single pass of encryption over the file `Constitution.pdf` using the key`fookeybar`. The output filename is set to `Constitution_encrypted` and it runs using a maximum of 4 threads. It encrypts using variable-dimension permutation matrices since the `D` flag was not invoked. It outputs a file named `Constitution_encrypted.fbz`. 

    $ ./fontblanc Constitution.pdf -e -o Constitution_encrypted -t 4 -k fookeybar
    File name: Constitution.pdf
    File size: 4488706 bytes
    Mode: encrypt
    Threads: 4

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Encrypting...
    Executing instruction 1...
    Elapsed time (s): 0.307854
    Done.  
    
The following command decrypts the file generated by the previous encryption command, but using 8 threads instead of 4. It outputs a file named `d_Constitution.pdf`.

    $ ./fontblanc Constitution_encrypted.fbz -d -o Constitution.pdf -t 8 -k fookeybar
    File name: Constitution_encrypted.fbz
    File size: 4488706 bytes
    Mode: decrypt
    Threads: 8

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Decrypting...
    Executing instruction 1...
    Elapsed time (s): 0.293071
    Done.  
    
### Multipass Encryption Example
The following command instructs the program to enter the instruction input loop for multipass encryption via the `m` flag. It runs using a maximum of 4 threads.  
The first instruction is defined in the program execution arguments and states to perform variable-dimension encryption using the key `fookeybar`.  
The second instruction is defined in the instruction input loop and states to perform variable-dimension encryption using the key `barkeybaz`.  
The third instruction is defined in the instruction input loop and states to perform fixed-dimension encryption using a permutation matrix size of 4096 using the key `bazkeyqux`.   
It outputs a file named `Constitution.pdf.fbz`.  

    $ ./fontblanc Constitution.pdf -e -t 4 -k fookeybar -m
    File name: Constitution.pdf
    File size: 4488706 bytes
    Mode: encrypt
    Threads: 4

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Enter an instruction using options "-k" "-D" "-s":
    $ -k barkeybaz

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #2 |
    Key: barkeybaz
    Matrix dimension: variable
    Data integrity checks: on

    Enter an instruction:
    $ -k bazkeyqux -D 4096

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #2 |
    Key: barkeybaz
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #3 |
    Key: bazkeyqux
    Matrix dimension: 4096
    Data integrity checks: on

    Enter an instruction:
    $ done

    Encrypting...
    Executing instruction 1...
    Executing instruction 2...
    Executing instruction 3...
    Elapsed time (s): 0.697083
    Done.  
    
The following command decrypts the file generated by the previous encryption command. Notice that in this example the user only defines the dimension for each instruction, so the user can type their encryption keys with keyboard echoing disabled (keystrokes are shown in the transcript for purpose of readability, but text enclosed in angle brackets would be masked in a terminal). It outputs a file named `d_Constitution.pdf`.

    $ ./fontblanc Constitution.pdf.fbz -d -t 4 -D 0 -m
    File name: Constitution.pdf.fbz
    File size: 4488706 bytes
    Mode: decrypt
    Threads: 4
    $ Enter key: <fookeybar>    // Masked input

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    Enter an instruction using options "-k" "-D" "-s":
    $ -D 0
    $ Enter key: <barkeybaz>    // Masked input

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #2 |
    Key: barkeybaz
    Matrix dimension: variable
    Data integrity checks: on

    Enter an instruction:
    $ -D 4096
    $ Enter key: <bazkeyqux>    // Masked input

    | Instruction #1 |
    Key: fookeybar
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #2 |
    Key: barkeybaz
    Matrix dimension: variable
    Data integrity checks: on

    | Instruction #3 |
    Key: bazkeyqux
    Matrix dimension: 4096
    Data integrity checks: on

    Enter an instruction:
    $ done
    
    Decrypting...
    Executing instruction 1...
    Executing instruction 2...
    Executing instruction 3...
    Elapsed time (s): 0.670722
    Done.  
    
    
    
